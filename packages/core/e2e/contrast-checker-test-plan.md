# コントラストチェッカー E2Eテスト計画書

## 概要

`/contrast-checker` ページは、WCAG 2.2基準に基づいて背景色と文字色のコントラスト比を計算し、アクセシビリティ基準への適合状態を確認できるツールです。

## テスト対象URL

- http://localhost:3000/contrast-checker

## テスト方針

このテストスイートは、コントラストチェッカーの初期状態と基本的な表示機能に焦点を当てています。

**注意**: HTML5の`type="color"`入力要素は、プログラマティックな値変更時にReactの`onChange`イベントを確実にトリガーしないという技術的制約があるため、色の入力操作を伴う動的なテストは含めていません。これらのテストは手動テストまたは別のアプローチで実施する必要があります。

## テストシナリオ

### 1. ページの初期状態を確認

**目的**: ページが正しく読み込まれ、デフォルト値が設定されていることを確認

**テスト内容**:
- ページタイトルが「コントラストチェッカー」と表示されること
- 背景色の入力フィールドが表示され、デフォルト値が`#000000`であること
- 文字色の入力フィールドが表示され、デフォルト値が`#ffffff`であること
- 背景色のプレビューが`#000000`として表示されること
- 文字色のプレビューが`#ffffff`として表示されること

### 2. 初期状態のコントラスト比を確認

**目的**: デフォルト値（黒背景・白文字）のコントラスト比が正しく計算されることを確認

**テスト内容**:
- コントラスト比が「21.00:1」と表示されること（最大値）
- WCAG基準テーブルが表示されること
- テーブルのヘッダー（AA、AAA、テキスト）が表示されること
- 4つのテキストサイズの行が表示されること：
  - 大文字の太字のテキスト（18.66px bold）
  - 大文字のテキスト（24px）
  - 小文字の太字のテキスト（16px bold）
  - 小文字のテキスト（18.66px）

### 3. 初期状態の適合状態を確認

**目的**: 最大コントラスト比（21.00:1）ですべての基準が「OK」となることを確認

**テスト内容**:
- すべてのテキストサイズでAA基準が「OK」と表示されること
- すべてのテキストサイズでAAA基準が「OK」と表示されること

### 4. AAA基準合格の確認

**目的**: コントラスト比が7:1以上の場合、小文字でもAAA基準に合格することを確認

**テスト内容**:
- 背景色を`#000000`に設定
- 文字色を`#ffffff`に設定（コントラスト比21.00:1）
- すべてのテキストサイズでAAA基準が「OK」となること

### 5. WCAG基準の説明セクションを確認

**目的**: WCAG 2.2基準の説明が正しく表示されることを確認

**テスト内容**:
- 「WCAG 2.2によるコントラスト比の基準」というテキストが表示されること
- WCAG 2.2へのリンクが表示され、クリック可能であること
- AA基準の説明（文字のコントラスト比が最低でも4.5:1、大文字の場合は3:1）が表示されること
- AAA基準の説明（文字のコントラスト比が最低でも7:1、大文字の場合は4.5:1）が表示されること
- 大文字の定義（18pt（24px）以上、太字の場合は14pt（18.66px）以上）が表示されること

## 実装されていないテストシナリオ

以下のシナリオは、HTML5の`type="color"`入力要素のプログラマティックな値変更がReactの`onChange`イベントを確実にトリガーしないという技術的制約により、E2Eテストとして実装していません。これらは手動テストまたは別のテスト手法（例：ユニットテスト）で検証する必要があります。

### 背景色の変更によるコントラスト比の再計算
- 背景色を変更した際のコントラスト比の更新
- 背景色プレビューの更新

### コントラスト比4.00:1での適合状態の確認
- 中間的なコントラスト比での適合状態判定

### 文字色の変更によるコントラスト比の再計算
- 文字色を変更した際のコントラスト比の更新

### 低コントラスト比での適合状態の確認
- 低いコントラスト比（すべての基準で不合格）の判定

### 高コントラスト比での適合状態の確認
- 大文字のみAA基準に合格する場合の判定

### 同じ色を入力した場合
- 背景色と文字色が同じ場合のコントラスト比1:1の確認

### エッジケース
- 完全な白と白
- 完全な黒と黒
- 無効な色コードの入力
- 3桁の16進数カラーコードのサポート

## テスト実行環境

- Browser: Chromium (Playwright)
- Base URL: http://localhost:3000
- Test Framework: Playwright

## 期待される動作

- 実装されたすべてのテストがパスすること
- ページの初期状態が正しく表示されること
- WCAG 2.2基準の説明が適切に表示されること
- デフォルト状態でのコントラスト比と適合状態が正しく表示されること
