# Architecture

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€k8oãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ç›®æ¬¡

- [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
- [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
- [ãƒ¢ãƒãƒ¬ãƒæ§‹æˆ](#ãƒ¢ãƒãƒ¬ãƒæ§‹æˆ)
- [ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹é€ ](#ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹é€ )
- [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](#ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼)
- [ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [è¨­è¨ˆæ€æƒ³](#è¨­è¨ˆæ€æƒ³)

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

k8oã¯ã€Next.js 15 App Routerã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸå€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µã‚¤ãƒˆã§ã™ã€‚
ãƒ–ãƒ­ã‚°ã€ãƒˆãƒ¼ã‚¯ã€ã‚µãƒ¼ãƒ“ã‚¹ç´¹ä»‹ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ„ãƒ¼ãƒ«ç¾¤ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½

- ğŸ“ **ãƒ–ãƒ­ã‚°** - MDXãƒ™ãƒ¼ã‚¹ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ï¼ˆæ•°å¼ã€ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆå¯¾å¿œï¼‰
- ğŸ¤ **ãƒˆãƒ¼ã‚¯** - ç™»å£‡æƒ…å ±ã®ç®¡ç†
- ğŸ› ï¸ **ãƒ„ãƒ¼ãƒ«** - é–‹ç™ºè€…å‘ã‘ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ„ãƒ¼ãƒ«é›†
  - QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆå™¨
  - è‰²å¤‰æ›ãƒ„ãƒ¼ãƒ«
  - æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼
  - Baseå¤‰æ›å™¨
  - ãªã©
- ğŸ·ï¸ **ã‚¿ã‚°ã‚·ã‚¹ãƒ†ãƒ ** - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚«ãƒ†ã‚´ãƒ©ã‚¤ã‚º
- ğŸ’¬ **ã‚³ãƒ¡ãƒ³ãƒˆ** - ãƒ–ãƒ­ã‚°è¨˜äº‹ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
- ğŸ“¬ **ãƒ¡ãƒ¼ãƒ«è³¼èª­** - é€±æ¬¡é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Next.js | 16.0.1 | App Routerã€SSR/SSG |
| UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª | React | 19.2.0 | UIæ§‹ç¯‰ |
| è¨€èª | TypeScript | 5.9.3 | å‹å®‰å…¨æ€§ |
| ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° | TailwindCSS | 4.1.16 | ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ  |
| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | @k8o/arte-odyssey | 1.1.0 | å†åˆ©ç”¨å¯èƒ½UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ | Motion | 12.23.24 | ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ |
| MDX | @next/mdx | 16.0.1 | ãƒ–ãƒ­ã‚°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ |
| æ•°å¼ | rehype-katex | 7.0.1 | æ•°å¼ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° |
| ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ | @shikijs/rehype | 3.14.0 | ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ©ã‚¤ãƒˆ |

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| ORM | Drizzle ORM | 0.44.7 | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | PostgreSQL | 18 | ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ |
| KVã‚¹ãƒˆã‚¢ | Redis | - | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ |
| ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | Zod | 4.1.12 | ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ |
| ãƒ¡ãƒ¼ãƒ« | Resend | 6.3.0 | ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ¡ãƒ¼ãƒ« |
| CMS | MicroCMS | - | ãƒ‹ãƒ¥ãƒ¼ã‚¹ç®¡ç† |

### é–‹ç™ºãƒ„ãƒ¼ãƒ«

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| ãƒ¢ãƒãƒ¬ãƒ | Turbo | 2.5.8 | ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ  |
| ãƒ†ã‚¹ãƒˆ | Vitest | 4.0.6 | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ |
| E2E | Playwright | 1.56.1 | ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ |
| Storybook | Storybook | 10.0.1 | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–‹ç™º |
| ãƒªãƒ³ã‚¿ãƒ¼ | Biome | 2.3.1 | ã‚³ãƒ¼ãƒ‰å“è³ª |
| Git hooks | Lefthook | 2.0.1 | pre-commit/pre-push |
| ãƒ¢ãƒƒã‚¯ | MSW | 2.11.6 | APIãƒ¢ãƒƒã‚¯ |

## ãƒ¢ãƒãƒ¬ãƒæ§‹æˆ

```
k8o/
â”œâ”€â”€ core/                    # ãƒ¡ã‚¤ãƒ³Next.jsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/            # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ database/       # Drizzleã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â”œâ”€â”€ services/       # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ emails/         # React Emailãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚   â””â”€â”€ mocks/          # MSWãƒ¢ãƒƒã‚¯å®šç¾©
â”‚   â”œâ”€â”€ .storybook/         # Storybookè¨­å®š
â”‚   â””â”€â”€ drizzle/            # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç”Ÿæˆæ™‚ï¼‰
â”‚
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ helpers/            # å…±æœ‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚       â””â”€â”€ src/
â”‚           â”œâ”€â”€ array/      # é…åˆ—æ“ä½œ
â”‚           â”œâ”€â”€ color/      # è‰²é–¢é€£
â”‚           â”œâ”€â”€ date/       # æ—¥ä»˜æ“ä½œ
â”‚           â”œâ”€â”€ number/     # æ•°å€¤æ“ä½œ
â”‚           â””â”€â”€ ...
â”‚
â””â”€â”€ node_modules/           # å…±æœ‰ä¾å­˜é–¢ä¿‚
```

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¾å­˜é–¢ä¿‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         @k8o/arte-odyssey           â”‚ (å¤–éƒ¨npm)
â”‚      UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†‘
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            core                     â”‚
â”‚      Next.jsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        @k8o/helpers                 â”‚
â”‚      ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹é€ 

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®åŸå‰‡

```
packages/core/src/
â”œâ”€â”€ app/                              # Next.js App Router
â”‚   â”œâ”€â”€ _api/                         # ã‚¢ãƒ—ãƒªå…±é€šAPIå±¤
â”‚   â”œâ”€â”€ _components/                  # ã‚¢ãƒ—ãƒªå…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ global-layout/           # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ link-card/               # ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ blog/                         # ãƒ–ãƒ­ã‚°æ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ (articles)/              # ãƒ«ãƒ¼ãƒˆã‚°ãƒ«ãƒ¼ãƒ—
â”‚   â”‚   â”‚   â””â”€â”€ [slug]/             # å‹•çš„ãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ _api/                    # ãƒ–ãƒ­ã‚°å°‚ç”¨API
â”‚   â”‚   â”œâ”€â”€ _components/             # ãƒ–ãƒ­ã‚°å°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ page.tsx                # ãƒ–ãƒ­ã‚°ä¸€è¦§ãƒšãƒ¼ã‚¸
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                         # APIãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ blog/                   # ãƒ–ãƒ­ã‚°API
â”‚   â”‚   â”œâ”€â”€ subscriptions/          # è³¼èª­API
â”‚   â”‚   â””â”€â”€ crons/                  # Cronã‚¸ãƒ§ãƒ–
â”‚   â”‚
â”‚   â””â”€â”€ [tool-name]/                # å„ãƒ„ãƒ¼ãƒ«
â”‚       â”œâ”€â”€ _components/            # ãƒ„ãƒ¼ãƒ«å°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”œâ”€â”€ _utils/                 # ãƒ„ãƒ¼ãƒ«å°‚ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â””â”€â”€ page.tsx               # ãƒ„ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸
â”‚
â”œâ”€â”€ database/                        # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å±¤
â”‚   â”œâ”€â”€ schema/                     # Drizzleã‚¹ã‚­ãƒ¼ãƒå®šç¾©
â”‚   â”œâ”€â”€ db.ts                       # DBæ¥ç¶š
â”‚   â””â”€â”€ utils.ts                    # DBæ“ä½œãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚
â”œâ”€â”€ services/                        # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
â”‚   â”œâ”€â”€ blogs/                      # ãƒ–ãƒ­ã‚°ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ talks/                      # ãƒˆãƒ¼ã‚¯ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ tags/                       # ã‚¿ã‚°ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ subscriptions/              # è³¼èª­ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â””â”€â”€ email/                      # ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚µãƒ¼ãƒ“ã‚¹
â”‚
â”œâ”€â”€ emails/                          # React Emailãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â””â”€â”€ verification-email.tsx
â”‚
â””â”€â”€ mocks/                           # MSWãƒ¢ãƒƒã‚¯å®šç¾©
    â”œâ”€â”€ handlers/                   # ãƒ¢ãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
    â””â”€â”€ browser.ts                  # ãƒ–ãƒ©ã‚¦ã‚¶ç”¨MSWè¨­å®š
```

### ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Presentation Layer          â”‚
â”‚      (app/, _components/)           â”‚
â”‚   - Next.js Pages/Layouts           â”‚
â”‚   - React Components                â”‚
â”‚   - Client/Server Components        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Application Layer           â”‚
â”‚          (services/)                â”‚
â”‚   - Business Logic                  â”‚
â”‚   - Use Cases                       â”‚
â”‚   - External API Integration        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Data Layer                 â”‚
â”‚         (database/)                 â”‚
â”‚   - Database Schema                 â”‚
â”‚   - ORM Operations                  â”‚
â”‚   - Data Access                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Conditional Import Maps

ç’°å¢ƒã«å¿œã˜ã¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é«˜åº¦ãªæ©Ÿèƒ½ï¼š

```typescript
// package.json
{
  "imports": {
    "#database/db": {
      "storybook": "./src/mocks/db.mock.ts",
      "default": "./src/database/db.ts"
    }
  }
}
```

**ç”¨é€”ï¼š**
- Storybookç’°å¢ƒã§ã¯ãƒ¢ãƒƒã‚¯DBã‚’ä½¿ç”¨
- æœ¬ç•ªç’°å¢ƒã§ã¯å®Ÿéš›ã®DBã‚’ä½¿ç”¨
- ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã‚‚åˆ‡ã‚Šæ›¿ãˆå¯èƒ½

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### ãƒ–ãƒ­ã‚°è¨˜äº‹è¡¨ç¤ºã®ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client     â”‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ–ãƒ­ã‚°ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Next.js Page â”‚ Server Component (SSG/ISR)
â”‚  (RSC)       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Services   â”‚ getBlog(slug)
â”‚  (blogs/)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database   â”‚ Drizzle ORM Query
â”‚ (PostgreSQL) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Redis     â”‚ ãƒ“ãƒ¥ãƒ¼ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥
â”‚   (Cache)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Response   â”‚ HTML with embedded data
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client     â”‚ POST /api/subscriptions/subscribe
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Route   â”‚ Zod Validation
â”‚ (route.ts)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rate Limit   â”‚ Upstash Redis Check
â”‚  Middleware  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Service    â”‚ subscribe(email)
â”‚ (subscriptions/)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database   â”‚ Insert subscriber
â”‚ (PostgreSQL) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Email     â”‚ Resend API
â”‚   Service    â”‚ Send verification
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Response   â”‚ { success: true }
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### æœ¬ç•ªç’°å¢ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Internet                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Vercel Edge Network                â”‚
â”‚              (CDN, Edge Functions)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Next.js Application                    â”‚
â”‚              (Serverless Functions)                 â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Neon      â”‚      â”‚   Upstash    â”‚
â”‚ PostgreSQL   â”‚      â”‚    Redis     â”‚
â”‚  (Database)  â”‚      â”‚   (Cache)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MicroCMS   â”‚      â”‚   Resend     â”‚
â”‚   (CMS)     â”‚      â”‚   (Email)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              localhost:3000                         â”‚
â”‚           Next.js Dev Server                        â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Docker    â”‚      â”‚    Docker    â”‚
â”‚ PostgreSQL  â”‚      â”‚    Redis     â”‚
â”‚ :5432       â”‚      â”‚    :6379     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Neon Proxy  â”‚
â”‚   :5433     â”‚ WebSocket Proxy
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è¨­è¨ˆæ€æƒ³

### 1. Server-First Architecture

- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§Server Componentsã‚’ä½¿ç”¨
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è² è·ã‚’æœ€å°åŒ–
- SEOæœ€é©åŒ–

```tsx
// Server Component (default)
export default async function BlogPage({ params }: Props) {
  const blog = await getBlog(params.slug); // ã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œ
  return <BlogLayout blog={blog} />;
}

// Client Component (å¿…è¦ãªå ´åˆã®ã¿)
'use client';
export function InteractiveButton() {
  const [count, setCount] = useState(0);
  return <button onClick={() => setCount(count + 1)}>{count}</button>;
}
```

### 2. Type Safety Everywhere

- Zodã«ã‚ˆã‚‹ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- Drizzle ORMã«ã‚ˆã‚‹å‹å®‰å…¨ãªDBæ“ä½œ
- TypeScript strict mode

```typescript
// ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
const subscribeSchema = z.object({
  email: z.string().email(),
});

// å‹æ¨è«–
type SubscribeInput = z.infer<typeof subscribeSchema>;

// ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
const result = subscribeSchema.safeParse(data);
```

### 3. Separation of Concerns

- Presentationå±¤ï¼ˆcomponentsï¼‰
- Applicationå±¤ï¼ˆservicesï¼‰
- Dataå±¤ï¼ˆdatabaseï¼‰
- å„å±¤ã®è²¬å‹™ã‚’æ˜ç¢ºã«åˆ†é›¢

### 4. Testing Strategy

- Helpers: In-source testing
- Components: Storybook stories
- Services: Vitest unit tests
- E2E: Playwright

### 5. Performance Optimization

- Incremental Static Regeneration (ISR)
- Edge Caching
- Redis caching for hot data
- Image optimization (Next.js Image)
- Code splitting
- Bundle analysis (Sonda)

### 6. Accessibility First

- Semantic HTML
- ARIA attributes
- Keyboard navigation
- Storybook a11y addon
- axe-playwright for testing

### 7. Progressive Enhancement

- åŸºæœ¬æ©Ÿèƒ½ã¯JavaScriptç„¡ã—ã§ã‚‚å‹•ä½œ
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ©Ÿèƒ½ã¯æ®µéšçš„ã«è¿½åŠ 
- Graceful degradation

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™

### Core Web Vitals ç›®æ¨™

- LCP (Largest Contentful Paint): < 2.5s
- FID (First Input Delay): < 100ms
- CLS (Cumulative Layout Shift): < 0.1

### ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

- Vercel Analytics
- Vercel Speed Insights
- Google Analytics

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- Rate limiting (Upstash Redis)
- CORSè¨­å®š
- CSP (Content Security Policy)
- ç’°å¢ƒå¤‰æ•°ã®é©åˆ‡ãªç®¡ç†
- SQL injectionå¯¾ç­–ï¼ˆDrizzle ORMï¼‰
- XSSå¯¾ç­–ï¼ˆReactè‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼‰

## ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

- Serverless architecture (Vercel)
- Edge functions for low latency
- Database connection pooling (Neon)
- Redis caching layer
- Static generation for content

---

è©³ç´°ãªå®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã¯[CONTRIBUTING.md](./CONTRIBUTING.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
